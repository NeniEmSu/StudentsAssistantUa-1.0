(function () {
    var myQuestions = [
        {
            question: "145.	Patient V. suffers from tuberculosis for 17 years. Recent dyspnea aggravation, cough, new pain in the right intercostal area, in heart area, drowsiness, edema in lower extremities. What is the most probable complication?",

            answers: {
                a: " 	Spontaneous pneumotorax",

                b: " 	Lung atelectasis",

                c: "  	Chronic lung heart",

                d: " 	Tuberculosis of bronchi",

                e: " 	Amiloidosis of internal organs"
            },
            correctAnswer: "c"
    },

        {
            question: "146.	The patient M., 19 years old, got sick gradually: general weakness, the body temperature up to 37 C. She had been in contact with a patient suffering from tuberculosis. The tuberculous meningitis was suspected. Say, which one from the present symptoms is not typical for the tuberculous meningitis?",

            answers: {
                a: "  	Normal body temperature",

                b: " 	Headache",

                c: " 	Gradual development of the disease",

                d: " 	Vomiting",

                e: " 	Dyplopia"
            },
            correctAnswer: "a"
    },

        {
            question: "147.	A patient 45 years old was diagnosed with tuberculous meningitis for the first time. The general condition is grave, the meningeal symptoms are sharply pronounced, the consciousness is shadowed. What is the total duration of this patient treatment?",

            answers: {
                a: " 	1 month",

                b: " 	3 months",

                c: " 	5 months",

                d: " 	7 months",

                e: "  	12 months"
            },
            correctAnswer: "e"
    },

        {
            question: "148.	The teacher O., 28 years old, was treated during 10 months because FDTB (05.05.2017) of the upper part of the right lung (infiltration ), Destr+, MBT+M-C+, Resist-, HIST0, Cat1 Coh2(2017). The state became much better (the absence of MBT, the closing of the cavity of decay). What is the tactics for the employment?",

            answers: {
                a: " 	To be let to the previous work",

                b: " 	To continue the list of uncapacity to work up to 12 months and then to be let to work",

                c: " 	To direct to the MSEC to indicate the II invalid group",

                d: "  	To direct to the MSEC to indicate the III invalid group",

                e: " 	To propose another job"
            },
            correctAnswer: "d"
    },


        {
            question: "149.	A man of 48. The X-ray examination showed multiple focuses of various dimensions of low and medium intensity with illegible contours in the upper segments of both lungs. The patient does not feel himself worse. Blood analysis: 8,2 x 109/l, ESR – 20 mm/hour. Which form of lungs tuberculosis does the patient have?",

            answers: {
                a: " 	Miliary",

                b: "  	Disseminated (chronic)",

                c: " 	Nidus",

                d: " 	Infiltrate",

                e: " 	Disseminated"
            },
            correctAnswer: "b"
    },

        {
            question: "150.	Patient 35 years old has complains concerning cough with sputum, weakness, shortness of breath during minor activity. He returned from correctional institutions three month ago. During medical examination, right part of the thorax lags behindduring breath. Mycobacterium tuberculosiswas revealed during bacterioscopy. Which clinical form of pulmonary tuberculosis was revealed in the patient?",

            answers: {
                a: " 	Tuberculoma.",

                b: "  	Fibrous cavernous tuberculosis",

                c: " 	Tuberculous pleurisy.",

                d: " 	Disseminated pulmonary tuberculosis.",

                e: " 	Focal tuberculosis."
            },
            correctAnswer: "b"
    },

        {
            question: "151.	Patient (woman) at the age 36 year first diagnosed fibrous cavernous pulmonary tuberculosis, mycobacterium tuberculosis+, resist to ethambutol and streptomycin. Which combination of antimicobacterial agents is the most optimal?",

            answers: {
                a: " 	Isoniazid+rifampicin A+ thioacetazone+florimytcin.",

                b: " 	Isoniazid+kanamycin+PAS(A)(para-aminosalicylic acid)+ethionamide.",

                c: " 	Kanamycin+ethionamide+rifampicin+phthivazide.",

                d: " 	Isoniazid+cycloserine+protionamide+kanamycin.",

                e: "  	Rifampicin+isoniazid+kanamycin+pyrazinamide."
            },
            correctAnswer: "e"
    },

        {
            question: "152.	Patient 42 years old.  He is sick by fibrous cavernous lung tuberculosis of the upper part of  the right lung during 8 years. MBT+. He feels normal during the last 2 year. X-ray: in the upper part of the right lung was found thick cavern with fibrosis and perifocal inflammation. The upper part is narrow dueto fibrosis. Both lungs have focuses of dissemination. Shadow of mediastinum shifted right.What X-ray are typical for fibro-cavernous lung tuberculosis?",

            answers: {
                a: "  	Caverns presence, well-defined fibrosis, focuses of semination.",

                b: " 	Perifocal inflammation, bronchogenic dissemination.",

                c: " 	Organs on mediastinum are shifted in the side of lesion.",

                d: " 	Intense dark patch, narrowed lung field.",

                e: " 	Caverns presence, perifocal inflammation."
            },
            correctAnswer: "a"
    },

        {
            question: "153.	Patient 33 years old admitted to hospital with complains about weakness, decreasing of the appetite, hyperhydrosis, subfebrile temperature, cough with sputum. Tuberculosis of the left lung (infiltrative form) was diagnosed 3 year ago. The patient systematically broke treatment course, abuse alcohol, irregularly took antimicobacterial medications. As a result, patient has resistance of mycobacterium tuberculosis to isoniazid and rifampicin and formed fibro-cavernous tuberculosis of left lung.What reasons of forming fibro-cavernous tuberculosis in this case?",

            answers: {
                a: " 	",
            },
            correctAnswer: "a"
        },

        {
            question: "154.	Patient 42years old. He is diagnosed by fibrous cavernous pulmonary tuberculosis during 8 years. He had irregular treatment. He has complains about intense pain in the left part of thorax, breathlessness. Objective: state of the patient is average, above left lung percussion data shows tympanitis, auscultatory - breathing not auscultates. What complications of fibro-cavernous pulmonary tuberculosis is present in this case?",

            answers: {
                a: " 	Bullous emphysema.",


                b: " 	Tuberculous atelectasis.",

                c: " 	Chronical cor pulmonale.",

                d: " 	Escudative pleurisy.",

                e: "  	Pneumothorax spontaneous."
            },
            correctAnswer: "e"
    },

        {
            question: "155.	Patient`s (woman) age 52 years. She is sick by fibrous cavernous pulmonary tuberculosis during 15 years. She had irregular treatment. She admitted to hospital with complains about strong pain in the left part of the thorax during breathing, shortness of breath. Objective: state of the patient is averagLeft part of the lung lags during breathing, during percussion – tympanitis. Auscultatory - breath very impaire What medical investigation need to do with patient at first for more accurate diagnosis?",

            answers: {
                a: " 	Medical investigation of respiratory function.",

                b: "  	Radiography of organs of thorax.",

                c: " 	Bronchoscopy.",

                d: " 	Tomography.",

                e: " 	Computer tomography."
            },
            correctAnswer: "b"
    },

        {
            question: "156.	Patient (woman) age 54 years. She is sick by fibrous cavernous lung tuberculosis during 15 years. She had irregular treatment. She admitted to hospital with complains about cough with bright-red blood with bubbles (total amount of the flowed blood near 250 milliliters), shortnes of breath, weakness, giddiness, subfebrile temperature. During percussion above upper part of right lung is tympanic soun of lung.During auscultation - bronchial respiration with different crepitations. Above other regions of lungs - diffused dry rales. X-ray: near S2 right lung defines cavity of disintegration with diameter 5.0 x 4.0 cm, upper part is reduced, right root pulled up. What complications of fibrous cavernous lung tuberculosis arose in the patient?",

            answers: {
                a: " 	Pneumothorax spontaneous.",

                b: " 	Sputum with blood.",

                c: " 	Pulmonary edema.",

                d: "  	Lung hemorrhage.",

                e: " 	Chronical cor pulmonale."
            },
            correctAnswer: "d"
    },

        {
            question: "157.	Patient 49 years old, has complains about weakness, decreasing of the appetite, hyperhydrosis, subfebrile temperature, cough with sputum. Tuberculosis of the left lung was diagnosed 7 years ago. Patient had course of treatment in the hospital. Two year ago patient had relapse of disease. Chest X-ray:in both lungs fibrous change of  upper part of left lung has cavity with diameter 6 centimeters with area of perifocal inflammation.Upper part of right lung has some cavities. Sputumhas mycobacterium tuberculosis+. What clinic form of tuberculosis is typical for such X-ray findings?",

            answers: {
                a: " 	Caseous pneumonia.",

                b: " 	Infiltrative form.",

                c: " 	Tuberculoma.",

                d: "  	Fibrous-cavernous form.",

                e: " 	Cirrhosis form"
            },
            correctAnswer: "d"
    },

        {
            question: "158.	Patient at the age of 56 years has fibrous cavernous pulmonary tuberculosis during 13 years. He admitted to hospital with complains about shortness of breath in quiet state, edema of legs. Objective: available diffusive cyanosis, increased liver on 4 centimeters, edema of legs. Above both lungs, in upper areas (against a background of hard breath) auscultates crepitation with middle bubbles. Ps– 100 per minute, arterial pressure 115/88 mm of mercury. Heart borders increased, present accent and separation of II sound above pulmonary artery. What complication arose in the patient?",

            answers: {
                a: " 	Pneumothorax spontaneous.",

                b: " 	Pulmonary hemorrhage.",

                c: " 	Spew with blood.",

                d: " 	Pulmonary edema.",


                e: "  	Chronical cor pulmonale."
            },
            correctAnswer: "e"
    },

        {
            question: "159.	Patient`s age is 40 years. Has tuberculosis during 7 years. Two years ago diagnosed fibrous cavernous lung tuberculosis, MBT+. Half year ago appeared progressive shortness of breath during physical activity. Now shortness of breath appears during rising on the second floor. Objective: respiration rate 24 per minute, pulse - 96 beats per minut. Heart sounds speeded up, rhythmical. Above pulmonary artery auscultates accent of second sound. Liver during palpation not painful, prominent from border of costal margin on 2 cm. What complication arose in the patient?",

            answers: {
                a: "  	Chronical lung heart.",

                b: " 	Pulmonary hemorrhage.",

                c: " 	Pulmonary edema.",

                d: " 	Spew with blood.",

                e: " 	Pneumothorax spontaneous."
            },
            correctAnswer: "a"
    },

        {
            question: "160.	Patient age is 40 years. Has fibrous cavernous pulmonary tuberculosis during 8 years. Last time has edema of legs. Urine examination shows: growing proteinuria, cylindruria, hyposthenuria.What is the most probable reasons for changing in urine examination?",

            answers: {
                a: " 	Acute nephritis.",

                b: " 	Renal tuberculosis.",

                c: " 	Amyloidosis.",

                d: " 	Chronic renal insufficiency.",

                e: "  	Cystic disease."
            },
            correctAnswer: "c"
    },

        {
            question: "161.	The prophylactic photoroentgenographic examination of a 25-year-old patient showed in segments 1-2 of the left lung focal shadows of low intensity without distinct contours. Mantoux test with 2 TO – 7 mm infiltrate Blood analysis: leuk. – 9,9 x 109/l, ESR – 26 mm/hour. Which is the most probable diagnosis?",

            answers: {
                a: " 	Infiltrative lung tuberculosis",

                b: " 	Nidus pneumonia",

                c: "  	Nidus lung tuberculosis",

                d: " 	Eosiniphil infiltration",

                e: " 	Lung cancer"
            },
            correctAnswer: "c"
    },

        {
            question: "162.	Patient, Underwent 4-months treatment in a hospital because of infiltrate tuberculosis of the upper segment of the left lung in the phase of destruction. He is achieved, but in the place of the infiltrate a round 2 cm hole of medium intensity and with distinct exterior contours is forme What treatment method is most advisable at this phase?",

            answers: {
                a: " 	To recommend sanatoric treatment",

                b: " 	To use surgical intervention",

                c: " 	To carry out 1,5-2th months course of hormonotherapy",

                d: " 	To use means of popular medicine",

                e: "  	To continue the treatment with antimycobacterial preparations"
            },
            correctAnswer: "e"
    },

        {
            question: "163.	A man 43 years old, smoker, complains of cough with little sputum secretion, subfebrility, weight loss. With the suspect for the abcess-forming pneumonia was hospitalized into a diagnostic department. Chest X-ray: in the upper segment of the right lung – 4x4 cm round shadow with distinct exterior contour. Blood analysis: leuk. – 9,0 x 109/l, ESR – 19 mm/hour. Sputum analysis: leuk. – 8-12 109/l in the vision field. Mantoux test with 2 TU – 22 mm infiltrate.What is the most probable diagnosis?",

            answers: {
                a: " 	Peripheral lung cancer",

                b: "  	Lung tuberculoma",

                c: " 	Non-malignant tumor",

                d: " 	Aspergiloma",

                e: " 	Abscess of lung"
            },
            correctAnswer: "b"
    },


        {
            question: "164.	A man of 38 complains of pain in heart area, subfebrility, sweatness, weight loss. Pulse: 82 strokes/min., AP 110/75 mm of mercury. Systolic murmur over the heart apex. Roentgenogram: nidus shadows up to 5mm in diameter on both lungs apexes. What disease is the most probable one?",

            answers: {
                a: " 	Sarcoidosis",

                b: " 	Eosinophil infiltration",

                c: "  	Nidus lung tuberculosis",

                d: " 	Peripheral lung cancer",

                e: " 	Nidus pneumonia"
            },
            correctAnswer: "c"
    },

        {
            question: "165.	Female patient Z. She got ill with diabetes mellitus six years ago. X-ray  examination showed infiltrate shadow with enlightenment in the center in the lower segment of the left lung. General condition of the patient is satisfactory. Blood analysis: leuk. – 10,5 x 109/l, ESR – 25 mm/hour. Mantoux test with 2 TU–positive. What is the most probable diagnosis?",

            answers: {
                a: " 	Lung cancer",

                b: " 	Pneumonia",

                c: " 	Abscess of a lung",

                d: " 	Primary tuberculosis complex",

                e: "  	Infiltrative tuberculosis"
            },
            correctAnswer: "e"
    },

        {
            question: "166.	Patient K., Got ill acutely after a surgical operation for a stomach ulcer. Roentgenogram: massive infiltration of pulmonary tissue with several hollows of destruction in the upper segment of the right lung. Mantoux test with 2 TO – doubtful. Blood analysis: leuk. – 17,0 x 109/l, ESR – 52 mm/hour. MBT are found in sputum. What is the most probable form of lungs tuberculosis?",

            answers: {
                a: "  	Caseous pneumonia",

                b: " 	Nidus",

                c: " 	Fibrous-cavernous",

                d: " 	Cirrhotic",

                e: " 	Infiltrative"
            },
            correctAnswer: "e"
    },

        {
            question: "167.	A cloud-like darkening of the upper part of the right lung with a lightening in the center, to the left paracardially a group of small intensity nidi have been revealed during fluorographic examination of a female patient, 30, suffering from a stomach ulcer. A preliminary diagnosis.",

            answers: {
                a: " 	Lung tuberculoma.",

                b: " 	Fibrous cavernous  tuberculosis.",

                c: " 	Caseous pneumonia.",

                d: "  	Infiltrative tuberculosis.",

                e: " 	Disseminated tuberculosis."
            },
            correctAnswer: "d"
    },

        {
            question: "168.	Haemoptysis appeared in a day after hyperinsolation of a girl. No pathologic changes were found in the lungs of fluorography six months ago. Wheezing are heard beneath the right clavicle, Mantoux test with 2 TU – 23 mm infiltrate. What changes in lungs can one think about?",

            answers: {
                a: " 	Spontaneous pneumothorax.",

                b: " 	Lung tuberculosis.",

                c: " 	Multiple nidi.",

                d: " 	Cirrhosis of a lung.",

                e: "  	Destruction cavities."
            },
            correctAnswer: "e"
    }

  ];

    function buildQuiz() {
        // we'll need a place to store the HTML output
        var output = [];

        // for each question...
        myQuestions.forEach((currentQuestion, questionNumber) => {
            // we'll want to store the list of answer choices
            var answers = [];

            // and for each available answer...
            for (letter in currentQuestion.answers) {
                // ...add an HTML radio button
                answers.push(
                    `<label>
             <input type="radio" name="question${questionNumber}" value="${letter}">
              ${letter} :
              ${currentQuestion.answers[letter]}
           </label>`
                );
            }

            // add this question and its answers to the output
            output.push(
                `<div class="slide">
           <div class="question"> ${currentQuestion.question} </div>
           <div class="answers"> ${answers.join("")} </div>
         </div>`
            );
        });

        // finally combine our output list into one string of HTML and put it on the page
        quizContainer.innerHTML = output.join("");
    }

    function showResults() {
        // gather answer containers from our quiz
        var answerContainers = quizContainer.querySelectorAll(".answers");

        // keep track of user's answers
        let numCorrect = 0;

        // for each question...
        myQuestions.forEach((currentQuestion, questionNumber) => {
            // find selected answer
            var answerContainer = answerContainers[questionNumber];
            var selector = `input[name=question${questionNumber}]:checked`;
            var userAnswer = (answerContainer.querySelector(selector) || {}).value;

            // if answer is correct
            if (userAnswer === currentQuestion.correctAnswer) {
                // add to the number of correct answers
                numCorrect++;

                // color the answers green
                answerContainers[questionNumber].style.color = "#00B000";
            } else {
                // if answer is wrong or blank
                // color the answers red
                answerContainers[questionNumber].style.color = "red";
            }
        });

      // show number of correct answers out of total
        resultsContainer.innerHTML = `${numCorrect} out of ${myQuestions.length}`;
    }

    function checkAnswer () {

      // get active slide
      var activeSlides = document.getElementsByClassName('active-slide')[0];

      // active question
      var question = activeSlides.childNodes[1].innerText;

      // active options
      var answers = activeSlides.childNodes[3].childNodes;

      // active slide inputs
      var inputName;

      // selected answer
      var option;

      // correct answer to the question
      var correctAnswer;


      // loop through options
      for (var i = 0; i < answers.length-1; i++) {

        if (answers[i].nodeName != '#text') {

          // get checked option
          if (answers[i].firstElementChild.checked) {

            option = answers[i].firstElementChild.value;
            inputName = answers[i].firstElementChild.name;

          } else {

            // get input name
            inputName = answers[i].firstElementChild.name;

          }

        }

      }


      // check if answer is right
      for (var i = 0; i < myQuestions.length; i++) {

        if (question == myQuestions[i].question) {
          if (option == myQuestions[i].correctAnswer) {

            correctAnswer = myQuestions[i].answers[option];

            for (var i = 0; i < answers.length-1; i++) {

                if (answers[i].nodeName != '#text') {

                  answers[i].style.color = 'red';

                    if (option === answers[i].firstElementChild.value) {

                      answers[i].style.color = 'green';

                    }

                }

            }

          } else {

            for (var i = 0; i < myQuestions.length; i++) {

              if (question == myQuestions[i].question) {

                for (var j = 0; j < answers.length-1; j++) {

                  if (answers[j].nodeName != '#text') {

                    answers[j].style.color = 'red';

                    if (myQuestions[i].correctAnswer === answers[j].firstElementChild.value) {

                      answers[j].style.color = 'green';

                    }

                  }

                }

              }

            }

          }

        }

      }

    }


    function showSlide(n) {
        slides[currentSlide].classList.remove("active-slide");
        slides[n].classList.add("active-slide");
        currentSlide = n;

        if (currentSlide === 0) {
            previousButton.style.display = "none";
        } else {
            previousButton.style.display = "inline-block";
        }

        if (currentSlide === slides.length - 1) {
            nextButton.style.display = "none";
            submitButton.style.display = "inline-block";
        } else {
            nextButton.style.display = "inline-block";
            submitButton.style.display = "none";
        }
    }


    function showNextSlide() {
        showSlide(currentSlide + 1);
    }

    function showPreviousSlide() {
        showSlide(currentSlide - 1);
    }

    var quizContainer = document.getElementById("quiz");
    var resultsContainer = document.getElementById("results");
    var submitButton = document.getElementById("submit");

    // display quiz right away
    buildQuiz();

    var previousButton = document.getElementById("previous");
    var nextButton = document.getElementById("next");
    var slides = document.querySelectorAll(".slide");
    var checkButton = document.getElementById("check");
    let currentSlide = 0;

    showSlide(0);

    // on submit, show results
    checkButton.addEventListener("click", checkAnswer);
    submitButton.addEventListener("click", showResults);
    previousButton.addEventListener("click", showPreviousSlide);
    nextButton.addEventListener("click", showNextSlide);
})();
