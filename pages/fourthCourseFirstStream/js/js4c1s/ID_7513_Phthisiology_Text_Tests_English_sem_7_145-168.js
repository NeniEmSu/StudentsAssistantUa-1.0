(function () {
    var myQuestions = [
        {
            question: "144.	Consider tuberculosis of bronchial tubes:",

            answers: {
                a: " 	the limited infiltration of bronchial tube",

                b: " 	stenosis of bronchial tube",

                c: " 	broncholithiasis",

                d: " 	atelectasis",

                e: " 	fibrosis"
            },
            correctAnswer: "a"
    },

        {
            question: "145.	Basic objective symptom of dry pleurisy:",

            answers: {
                a: " 	intoxication",

                b: " 	cough",

                c: " 	shortness of breath",

                d: " 	moist wheezes",

                e: " 	noise of friction of pleura, pain in a thorax"
            },
            correctAnswer: "e"
    },

        {
            question: "146.	What diseases can remind pain caused by tubercular pleurisy?",

            answers: {
                a: " 	mediastenal neuralgia",

                b: " 	angina",

                c: " 	osteochondrosis",

                d: " 	maist",


                e: " 	all of answers are correct"
            },
            correctAnswer: "e"
    },

        {
            question: "147.	What from the transferred changes can appear at x-ray research of thorax for persons who have  a fibrinosis pleurisy?",

            answers: {
                a: " 	different localization pleura accretions",

                b: " 	calcification of pleura",

                c: " 	all of answers are correct",

                d: " 	diffuse dimness of the pulmonary field",

                e: " 	fibrotic stratifications "
            },
            correctAnswer: "c"
    },

        {
            question: "148.	What diagnostic receptions can be used to establish the tubercular etiology of fibrinous pleurisy?",

            answers: {
                a: " 	Koch test",

                b: " 	previous treatment by antibiotics of wide spectrum without effect",

                c: " 	all of answers are correct",

                d: " 	exclusion of other illnesses which can be accompanied by affection of pleura ",

                e: " 	pleuroscopy with  next biopsy of pleura"
            },
            correctAnswer: "c"
    },

        {
            question: "149.	How can tubercular exudative pleurisy begin?",

            answers: {
                a: " 	all of answers are correct",

                b: " 	acute",

                c: " 	subacute",

                d: " 	acute from prodromes",

                e: " 	asymptomatic (diagnosed by prophylactic fluorography)"
            },
            correctAnswer: "a"
    },

        {
            question: "150.	What from the transferred methods are the most informative for establishment of diagnosis of exsudate pleurisy?",

            answers: {
                a: "  	x-ray",

                b: " 	rentgenoscopy",

                c: "	pleura puncture",

                d: " 	auscultation",

                e: " 	percussion"
            },
            correctAnswer: "c"
    },

        {
            question: "151.	What is typical for pleural effusion in patients with tubercular serous pleurisy?",

            answers: {
                a: " 	density 1,015-1,022",

                b: " 	absence or mesothelial cells",

                c: " 	lymphocytes (90 - 100%)",

                d: " 	protein 30-60 grammes/l",

                e: " 	all of answers are correct"
            },
            correctAnswer: "e"
    },

        {
            question: "152.	Which of the transferred indexes are more frequently observed for patients with a tubercular exsudate pleurisy at research of pleura effusion?",

            answers: {
                a: " 	protein more 60 grammes/l",

                b: " 	density below 1,012 kg/l",

                c: " 	lymphocytes (90 - 100%)",

                d: " 	erythrocytes",

                e: " 	negative reaction of Rivalt"
            },
            correctAnswer: "c"
    },

        {
            question: "153.	At what diseases does pleura effusion more frequently  has transsudative character all is correct, except :",

            answers: {
                a: " 	all of answers are correct",

                b: " 	to stagnant cardiac insufficiency",

                c: " 	nephrotical syndrome",

                d: " 	cirrhosis of liver",

                e: " 	tuberculosis"
            },
            correctAnswer: "e"
    },


        {
            question: "154.	What methods are most informative for diagnostic of tubercular etiology of exudative pleurisy?",

            answers: {
                a: " 	X-ray",

                b: " 	trial treatment by antiTB drugs",

                c: " 	trial treatment by dugs with wide spectrum of action",

                d: " 	biopsy of pleura (puncture, during thoracoscopy, opened)",

                e: " 	by differential diagnostic"
            },
            correctAnswer: "d"
    },

        {
            question: "155.	Tubercular pleurisy as independent clinical form of tuberculosis â€“it is:",

            answers: {
                a: " 	tubercular defeat of pleura with pouring out of lymphogenic or hematogenic genesis of hillocks  and formation of fibrous-cavernous  effusion, now and then as an empyema",

                b: " 	specific defeat of pleura which serosal pleura effusion of lymphocytic character accumulates at, now and then as an empyema",

                c: " 	reaction of pleura on the tubercular defeat of intrathoracic lymphatic nodes as exudation",

                d: " 	and fibrosa or serosal effusion, now and then as an empyema",

                e: " 	specific defeat of pleura of hematogenous genesis, as an empyema"
            },
            correctAnswer: "a"
    },

        {
            question: "156.	Disseminated tuberculosis is characterized:",

            answers: {
                a: " 	by a presence, usually in both lungs, hearths of dissemination of hematogenous, now and then lymphogenic or mixed genesis, different remoteness, with different correlation of exsudate and productive inflammation; by sharp, subsharp and chronic motion",

                b: " 	to a pouring out of plural of hearths of dissemination of hematogenous or bronchogenic genesis in intersticial fabric of both lungs with sharp, subsharp and chronic motion of disease",

                c: " 	different genesis and remoteness pouring out of hearths of dissemination in both lungs with sharp, subsharp or chronic motion of process",

                d: " 	by a presence of single hearths of dissemination in both lungs with sharp and subsharp motion",

                e: " 	to a pouring out of single hearths of dissemination of hematogenous or bronchogenic genesis in intersticial fabric one-sided"
            },
            correctAnswer: "a"
    },

        {
            question: "157.	Focal tuberculosis is characterized:",

            answers: {
                a: " 	focus of caseson, surrounded a thin fibrotic capsule diametrom more 1 with torpid motion",

                b: " 	to a pouring out of two-bit of shallow (to 1-1,5 see) hearths of lymphobronchogenous genesis in the apexes of lungs",

                c: " 	by a presence of lymphobronchogenous genesis of hearths to 1,0 see in a diameter, mainly productive character in the apex of one or both lungs",

                d: " 	specific exsudate-pneumonic process by a size more 10 mm with propensity to making progress motion",

                e: " 	by a presence of different genesis and remoteness of small (to 10 mm in a diameter) hearths of mainly productive character within the limits of 1-2 segments in one or both lungs and oligosymptomatic motion"
            },
            correctAnswer: "e"
    },

        {
            question: "158.	Infiltrative tuberculosis - is:",

            answers: {
                a: " 	infiltration of pulmonary fabric from during more 1-1,5 with the expressed clinical displays and propensity to disintegration",

                b: " 	different size infiltration of pulmonary fabric with a caseson  core, with propensity to disintegration",

                c: " 	specific exsudate-pneumonic process by a size more 10 mm with propensity to making progress motion",

                d: " 	productive character in the apex of one or both lights",

                e: " 	by a presence of different genesis and remoteness of small (to 2 sm) hearths of mainly productive character"
            },
            correctAnswer: "c"
    },

        {
            question: "159.	Caseous pneumonia - it:",

            answers: {
                a: "  	quickly making progress process with large caseson-necrotic changes with easy motion",

                b: " 	caseson-necrotic process of large draught with quickly making progress motion",


                c: " 	quickly making progress process with large caseson-necrotic changes with heavy, quite often lethal investigation",

                d: " 	quickly making progress process with large cavities, by quickly making progress motion with lethal investigation",

                e: "	sharp specific pneumonia which is characterized by quickly increasing caseos-necrotic changes and heavy, quite often by quickly making progress motion with lethal investigation"
            },
            correctAnswer: "e"
    },

        {
            question: "160.	Tuberculoma of lungs - is:",

            answers: {
                a: " 	focus of caseson, surrounded a thin fibrotic capsule diametrom more 1 with torpid motion",

                b: " 	caseson focus is incapsulated with a diameter more 1, 5 with an insignificant clinic and asymptomatic motion ",

                c: " 	various genesis, as a rule, incapsulated, mainly caseson formation more 10 mm in a diameter, with an insignificant clinic",

                d: " 	caseson focus is incapsulated with a diameter less than 1  with a bright clinic and stormy motion",

                e: " 	various genesis, neinkapsulevane, mainly kazeozne education more 2 see in a diameter, with a bright clinic"
            },
            correctAnswer: "c"
    },

        {
            question: "161.	A fibro-cavernous tuberculosis is characterized:",

            answers: {
                a: " 	by a presence of fibrotic cavity, development of fibrotic changes in pulmonary fabric round a cavity, hearths of bronchogenous contamination in that and (or) opposite lungs, permanent or periodic bacterial excretion, chronic undulating, as a rule, by making progress motion",

                b: " 	by chronic undulating motion of fibro - cavernousprocess from contamination and quite often - by complications ",

                c: " 	by a fibro - cavernous process from bacterial excretion not less 2 th annual remoteness and by chronic undulating motion ",

                d: " 	by a fibro-cavernous process without bacterial excretion , with sharp motion",

                e: " 	by development of fibrotic changes in pulmonary fabric, absence of cavities, permanent or periodic bacterial excretion "
            },
            correctAnswer: "a"
    },

        {
            question: "162.	Miliary tuberculosis is characterized by:",

            answers: {
                a: " 	presence of fibrotic cavity, development of fibrotic changes around a cavity and nidi of bronchogenic dissemination in lung tissue.",

                b: " 	Lympho-haematogenous spreading of infection and is characterized by bilateral, symmetric injury whith predominant localization in upper, subcortical sections.",

                c: " 	the presence of a nidus or a group of nidi within not more than two segments of one or both lungs",

                d: " 	haematogenous, almost always generalized form of tuberculosis which is characterized the even, abundant pouring out of shallow, from millet grain of tubercular humps in the interstitium of lungs and, as a rule, in other organs",

                e: " 	sharp specific pneumonia which is characterized by quickly increasing caseson-necrotic changes "
            },
            correctAnswer: "d"
    },

        {
            question: "163.	Choose right characteristic of cirrhotic tuberculosis: ",

            answers: {
                a: " 	large excrescences of cicatricial tissue, which active tubercular nodes which stipulate periodic exacerbation and scanty bacterial excretion",

                b: " 	postTB cirrhosis of lung with the periodic exacerbation, bronchogenic contamination and bacterial excretion",

                c: " 	fibro-cavernous changes with preference of cirrhosis, scanty bacterial excretion",

                d: " 	insignificant amount of cicatricial fabric, fibro-cavernous changes with preference of cirrhosis ",

                e: " 	postTB cirrhosis of lung without bacterial excretion"
            },
            correctAnswer: "a"
    },

        {
            question: "164.	Choose main factor in development of  caseous pneumonia:",

            answers: {
                a: " 	the immunodeficient state of organism",

                b: " 	all of answers are not correct",

                c: " 	all of answers are correct",

                d: " 	multidrug resistant of MBT ",

                e: " 	increasing frequency of tuberculosis among a population"
            },
            correctAnswer: "c"
    },


        {
            question: "165.	What distributing of caseous pneumonia is depending on a gender:",

            answers: {
                a: " 	men are more frequently ill ",

                b: " 	women are more frequently ill ",

                c: " 	men and women are ill identically often",

                d: " 	not established",

                e: " 	more often men are ill"
            },
            correctAnswer: "a"
    },

        {
            question: "166.	Choose right type of development of caseous pneumonia:",

            answers: {
                a: " 	apperceptive",

                b: " 	undulating course",

                c: " 	gradually",

                d: " 	asymptomaticly",

                e: " 	acute"
            },
            correctAnswer: "e"
    },

        {
            question: "167.	Which are the most typical radiological indications of new tuberculosis focus in the lungs?",

            answers: {
                a: " 	Average intensity, round shape, diameter 3-5 centimeters.",

                b: " 	Big intensity, clear borders, diameter up to 1 centimeter.",

                c: " 	Small intensity, clear borders, diameter more than 1 centimeter.",

                d: " 	Big intensity, nonccontrast  borders, diameter more than 1 centimeter.",

                e: " 	Small or average intensity, non contrast  borders, diameter up to 1 centimeter."
            },
            correctAnswer: "e"
    },

        {
            question: "168.	Which is the most accurate definition of infiltrative pulmonary tuberculosis as clinicorontgenological  form of specific process?",

            answers: {
                a: " 	Infiltrative tuberculosis is area of specific inflammation with mainly escudative nature, with size more than 1 cm, with disposition to progress and disintegration, possible bronchogenic semination.",

                b: " 	Infiltrative tuberculosis is focus of specific inflammation which necessarily accompaniment of disintegration pulmonary tissue and disemination of pulmonary tissue.",

                c: " 	It is form of specific inflammation with availability in the lungs formed and stable by dimension cavity with marked infiltrative and (sometime) fibrous changes in surrounding pulmonary tissue.",

                d: " 	Infiltrative tuberculosis is area of specific inflammation with chronical torpid behavior, with size more than 1 cm, with predisposition to spontaneous recovery.",

                e: " 	Infiltrative tuberculosis has big quantity of specific centers in the lungs. At initial stage of disease prevails escudative-necrotizing reaction with future evolution of productive inflammation."
            },
            correctAnswer: "a"
    }


  ];

    function buildQuiz() {
        // we'll need a place to store the HTML output
        var output = [];

        // for each question...
        myQuestions.forEach((currentQuestion, questionNumber) => {
            // we'll want to store the list of answer choices
            var answers = [];

            // and for each available answer...
            for (letter in currentQuestion.answers) {
                // ...add an HTML radio button
                answers.push(
                    `<label>
             <input type="radio" name="question${questionNumber}" value="${letter}">
              ${letter} :
              ${currentQuestion.answers[letter]}
           </label>`
                );
            }

            // add this question and its answers to the output
            output.push(
                `<div class="slide">
           <div class="question"> ${currentQuestion.question} </div>
           <div class="answers"> ${answers.join("")} </div>
         </div>`
            );
        });

        // finally combine our output list into one string of HTML and put it on the page
        quizContainer.innerHTML = output.join("");
    }

    function showResults() {
        // gather answer containers from our quiz
        var answerContainers = quizContainer.querySelectorAll(".answers");

        // keep track of user's answers
        let numCorrect = 0;

        // for each question...
        myQuestions.forEach((currentQuestion, questionNumber) => {
            // find selected answer
            var answerContainer = answerContainers[questionNumber];
            var selector = `input[name=question${questionNumber}]:checked`;
            var userAnswer = (answerContainer.querySelector(selector) || {}).value;

            // if answer is correct
            if (userAnswer === currentQuestion.correctAnswer) {
                // add to the number of correct answers
                numCorrect++;

                // color the answers green
                answerContainers[questionNumber].style.color = "#00B000";
            } else {
                // if answer is wrong or blank
                // color the answers red
                answerContainers[questionNumber].style.color = "red";
            }
        });

        // show number of correct answers out of total
        resultsContainer.innerHTML = `${numCorrect} out of ${myQuestions.length}`;
    }

    function checkAnswer() {

        // get active slide
        var activeSlides = document.getElementsByClassName('active-slide')[0];

        // active question
        var question = activeSlides.childNodes[1].innerText;

        // active options
        var answers = activeSlides.childNodes[3].childNodes;

        // active slide inputs
        var inputName;

        // selected answer
        var option;

        // correct answer to the question
        var correctAnswer;


        // loop through options
        for (var i = 0; i < answers.length - 1; i++) {

            if (answers[i].nodeName != '#text') {

                // get checked option
                if (answers[i].firstElementChild.checked) {

                    option = answers[i].firstElementChild.value;
                    inputName = answers[i].firstElementChild.name;

                } else {

                    // get input name
                    inputName = answers[i].firstElementChild.name;

                }

            }

        }


        // check if answer is right
        for (var i = 0; i < myQuestions.length; i++) {

            if (question == myQuestions[i].question) {
                if (option == myQuestions[i].correctAnswer) {

                    correctAnswer = myQuestions[i].answers[option];

                    for (var i = 0; i < answers.length - 1; i++) {

                        if (answers[i].nodeName != '#text') {

                            answers[i].style.color = 'red';

                            if (option === answers[i].firstElementChild.value) {

                                answers[i].style.color = 'green';

                            }

                        }

                    }

                } else {

                    for (var i = 0; i < myQuestions.length; i++) {

                        if (question == myQuestions[i].question) {

                            for (var j = 0; j < answers.length - 1; j++) {

                                if (answers[j].nodeName != '#text') {

                                    answers[j].style.color = 'red';

                                    if (myQuestions[i].correctAnswer === answers[j].firstElementChild.value) {

                                        answers[j].style.color = 'green';

                                    }

                                }

                            }

                        }

                    }

                }

            }

        }

    }


    function showSlide(n) {
        slides[currentSlide].classList.remove("active-slide");
        slides[n].classList.add("active-slide");
        currentSlide = n;

        if (currentSlide === 0) {
            previousButton.style.display = "none";
        } else {
            previousButton.style.display = "inline-block";
        }

        if (currentSlide === slides.length - 1) {
            nextButton.style.display = "none";
            submitButton.style.display = "inline-block";
        } else {
            nextButton.style.display = "inline-block";
            submitButton.style.display = "none";
        }
    }


    function showNextSlide() {
        showSlide(currentSlide + 1);
    }

    function showPreviousSlide() {
        showSlide(currentSlide - 1);
    }

    var quizContainer = document.getElementById("quiz");
    var resultsContainer = document.getElementById("results");
    var submitButton = document.getElementById("submit");

    // display quiz right away
    buildQuiz();

    var previousButton = document.getElementById("previous");
    var nextButton = document.getElementById("next");
    var slides = document.querySelectorAll(".slide");
    var checkButton = document.getElementById("check");
    let currentSlide = 0;

    showSlide(0);

    // on submit, show results
    checkButton.addEventListener("click", checkAnswer);
    submitButton.addEventListener("click", showResults);
    previousButton.addEventListener("click", showPreviousSlide);
    nextButton.addEventListener("click", showNextSlide);
})();
